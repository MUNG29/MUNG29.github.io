<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <title>
      
        python IO | 东隅's blog
      
    </title>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    
      <link rel="apple-touch-icon"
            sizes="180x180"
            href="/images/jocker.png"/>
    
    
      <link rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/jocker.png"/>
    
    
      <link rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/jocker.png"/>
    
    
      <link rel="mask-icon"
            href="/images/jocker.png"
            color=""/>
    
    
    <link rel="stylesheet" type="text/css" href="/css/layout.css"/>
    
    
  <link rel="stylesheet" type="text/css" href="/css/post.css"/>
  

  <meta name="generator" content="Hexo 5.4.0"></head>
  <body>
    <div class="head">
      <div class="nav">
        <a href="/" class="nav-logo">
          <img alt="logo" height="60px" width="60px" src="/images/jocker.png" />
        </a>
        <input id="navBtn" type="checkbox"/>
        <div class="nav-menu">
          
            
              <a class="nav-menu-item" href="/%E5%AE%89%E5%85%A8">安全</a>
            
              <a class="nav-menu-item" href="/%E5%BC%80%E5%8F%91">开发</a>
            
              <a class="nav-menu-item" href="/%E7%94%9F%E6%B4%BB">生活</a>
            
          
        </div>
        <label class="nav-btn" for="navBtn"></label>
      </div>
    </div>
    <div class="body">
      
  <article class="post-content">
    <div class="post-inner">
      <div class="post-content__head">
        <div class="post-title">python IO</div>
        <div class="post-info">
          
  
    <a href="/tags/%E8%84%9A%E6%9C%AC/" class="post-tag">#脚本</a>
  
    <a href="/tags/python/" class="post-tag">#python</a>
  


          <span class="post-date">2023-05-12</span>
        </div>
      </div>
      <div id="postBody" class="post-content__body--toc">
        <div id="tocAnchor" class="toc-anchor">
          <ol id="toc" class="post-toc">
            
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99"><span class="toc-text">文件读写</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="toc-text">文件操作模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BB%E5%86%99text%E6%95%B0%E6%8D%AE"><span class="toc-text">读写text数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BB%E5%86%99%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE"><span class="toc-text">读写二进制数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-text">小技巧</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9"><span class="toc-text">文件压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#zipfile"><span class="toc-text">zipfile</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84"><span class="toc-text">路径</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-text">处理路径问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-text">判断文件或文件夹是否存在</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-text">查找文件名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E5%92%8C%E7%A7%BB%E5%8A%A8"><span class="toc-text">复制和移动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">文件夹操作</span></a></li></ol>
            
          </ol>
        </div>
        
          <div class="post-gallery">
            
          </div>
        
        <h1 id="文件读写"><a href="#文件读写" class="headerlink" title="文件读写"></a>文件读写</h1><h2 id="文件操作模式"><a href="#文件操作模式" class="headerlink" title="文件操作模式"></a>文件操作模式</h2><table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">t</td>
<td align="left">文本模式 (默认)。</td>
</tr>
<tr>
<td align="left">x</td>
<td align="left">写模式，新建一个文件，如果==该文件已存在则会报错==。</td>
</tr>
<tr>
<td align="left">b</td>
<td align="left">二进制模式。</td>
</tr>
<tr>
<td align="left">+</td>
<td align="left">打开一个文件进行更新(==可读可写==)。</td>
</tr>
<tr>
<td align="left">U</td>
<td align="left">通用换行模式（不推荐）。</td>
</tr>
<tr>
<td align="left">r</td>
<td align="left">以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td align="left">rb</td>
<td align="left">以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。一般用于==非文本文件如图片==等。</td>
</tr>
<tr>
<td align="left">r+</td>
<td align="left">打开一个文件用于==读写==。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td align="left">rb+</td>
<td align="left">以二进制格式打开一个文件用于==读写==。文件指针将会放在文件的开头。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td align="left">w</td>
<td align="left">打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td align="left">wb</td>
<td align="left">以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td align="left">w+</td>
<td align="left">打开一个文件用于==读写==。如果该文件已存在则打开文件，并从开头开始编辑，即==原有内容会被删除==。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td align="left">wb+</td>
<td align="left">以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td align="left">ab</td>
<td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td align="left">a+</td>
<td align="left">打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td>
</tr>
<tr>
<td align="left">ab+</td>
<td align="left">以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td>
</tr>
</tbody></table>
<h2 id="读写text数据"><a href="#读写text数据" class="headerlink" title="读写text数据"></a>读写text数据</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">with open(filename, &#x27;rt&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">    data = f.read()</span><br><span class="line"></span><br><span class="line">with open(filename, &#x27;rt&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">    for line in f:</span><br><span class="line">        print(line)</span><br><span class="line"></span><br><span class="line">with open(filename, &#x27;wt&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">    f.write(text1)</span><br><span class="line"></span><br><span class="line">with open(filename, &#x27;wt&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">    # 也可以使用print函数，指定file参数即可</span><br><span class="line">    print(text1,file=f)</span><br></pre></td></tr></table></figure>

<p>如果是追加模式，<strong>wt</strong>换成<strong>at</strong>即可。</p>
<p>使用<code>sys.getdefaultencoding()</code>可以获取到系统默认的编码方式，一般是<strong>utf-8</strong>，尽量使用<code>with</code>来操作文件，因为它自动帮你管理了文件的打开和关闭，如果不用with，自己不要忘记了关闭文件。</p>
<h2 id="读写二进制数据"><a href="#读写二进制数据" class="headerlink" title="读写二进制数据"></a>读写二进制数据</h2><blockquote>
<p>在Python中，<code>b&#39;Hello World&#39;</code> 表示一个字节字符串。字节字符串是类似于文本字符串的数据类型，但是它们以字节为单位存储数据，而不是Unicode字符。</p>
<p>在Python 3中，所有的字符串都默认是Unicode字符串。如果你需要使用字节字符串，则需要在字符串前加上 <code>b</code> 字符来指明这是一个字节字符串。</p>
<p>例如，以下两个字符串在 Python 中具有相同的值，但是不同的数据类型：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python复制代码s1 = <span class="string">&#x27;Hello, world!&#x27;</span>    <span class="comment"># 文本字符串</span></span><br><span class="line">s2 = <span class="string">b&#x27;Hello, world!&#x27;</span>   <span class="comment"># 字节字符串</span></span><br></pre></td></tr></table></figure>

<p>在某些情况下，你需要使用到了底层 I/O 操作、网络编程或与其他语言通信时，需要使用字节字符串来处理二进制数据。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">with open(filename, &#x27;rb&#x27;) as f:</span><br><span class="line">    data = f.read()</span><br><span class="line"></span><br><span class="line">with open(filename, &#x27;wb&#x27;) as f:</span><br><span class="line">    f.write(b&#x27;Hello World&#x27;)</span><br><span class="line"></span><br><span class="line">with open(filename, &#x27;rb&#x27;) as f:</span><br><span class="line">    data = f.read(16)</span><br><span class="line">    text = data.decode(&#x27;utf-8&#x27;)</span><br><span class="line"></span><br><span class="line">with open(filename, &#x27;wb&#x27;) as f:</span><br><span class="line">    text = &#x27;Hello World&#x27;</span><br><span class="line">    f.write(text.encode(&#x27;utf-8&#x27;))</span><br></pre></td></tr></table></figure>

<h2 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h2><p>如果要求对一个不存在的文件进行写操作，而存在的文件则不进行操作。（这样可以防止覆盖了已存在文件的内容）</p>
<p>常规写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(filename):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;wt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="string">&#x27;Hello\n&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;File already exists!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>更简单的写法，使用open的<strong>x模式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;xt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&#x27;Hello\n&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h1 id="文件压缩"><a href="#文件压缩" class="headerlink" title="文件压缩"></a>文件压缩</h1><h2 id="zipfile"><a href="#zipfile" class="headerlink" title="zipfile"></a>zipfile</h2><p><a target="_blank" rel="noopener" href="https://www.liujiangblog.com/course/python/62">https://www.liujiangblog.com/course/python/62</a></p>
<p>zipfile模块其实很简单，记住下面几个重要的方法就可以了。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>z = zipfile.ZipFile()</td>
<td>打开或者新建一个zip文件对象</td>
</tr>
<tr>
<td>z.write()</td>
<td>添加文件到压缩包内</td>
</tr>
<tr>
<td>z.infolist()</td>
<td>查看压缩包内的文件信息</td>
</tr>
<tr>
<td>z.extract()</td>
<td>解压单个文件</td>
</tr>
<tr>
<td>z.extractall()</td>
<td>解压所有文件</td>
</tr>
<tr>
<td>z.close()</td>
<td>关闭压缩文件</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">zipfile.is_zipfile(filename)</span><br><span class="line">如果文件是个ZIP文件则返回<span class="literal">True</span>，否则<span class="literal">False</span>。</span><br><span class="line"></span><br><span class="line">ZipFile.write(filename, arcname=<span class="literal">None</span>, compress_type=<span class="literal">None</span>)</span><br><span class="line">往ZIP文件里添加新文件，单个文件可以重复添加，但是会弹出警告。如果指定arcname参数，则在ZIP文件内部将原来的filename改成arcname。例如z.write(<span class="string">&quot;test/111.txt&quot;</span>, <span class="string">&quot;test22/111.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">ZipFile.close()</span><br><span class="line">确保压缩文件被正确关闭。</span><br><span class="line"></span><br><span class="line">ZipFile.namelist()</span><br><span class="line">返回ZIP文件内所有成员名字列表。</span><br><span class="line"></span><br><span class="line">ZipFile.<span class="built_in">open</span>(name, mode=<span class="string">&#x27;r&#x27;</span>, pwd=<span class="literal">None</span>, *, force_zip64=<span class="literal">False</span>)</span><br><span class="line">访问档案中的指定文件。pwd是解压密码。该方法也是个上下文管理器，支持<span class="keyword">with</span>语法。</span><br><span class="line"><span class="keyword">with</span> ZipFile(<span class="string">&#x27;spam.zip&#x27;</span>) <span class="keyword">as</span> myzip:</span><br><span class="line">    <span class="keyword">with</span> myzip.<span class="built_in">open</span>(<span class="string">&#x27;eggs.txt&#x27;</span>) <span class="keyword">as</span> myfile:</span><br><span class="line">        <span class="built_in">print</span>(myfile.read())</span><br><span class="line"></span><br><span class="line">ZipFile.extract(member, path=<span class="literal">None</span>, pwd=<span class="literal">None</span>)</span><br><span class="line">解压单个文件。核心方法之一。将ZIP文件中的某个成员解压到当前目录。member必须是完整名，path是指定的解压目录。解压的过程不会破坏原压缩文件。</span><br><span class="line"></span><br><span class="line">ZipFile.extractall(path=<span class="literal">None</span>, members=<span class="literal">None</span>, pwd=<span class="literal">None</span>)</span><br><span class="line">批量解压文件。默认是全部解压。核心方法之一。</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">zipfile</span>.<span class="title">ZipFile</span>(<span class="params">file, mode=<span class="string">&#x27;r&#x27;</span>, compression=ZIP_STORED, allowZip64=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class">打开一个<span class="title">ZIP</span>文件。返回的也是一个类似文件的<span class="title">ZipFile</span>对象，可以读写。</span></span><br><span class="line"><span class="class"><span class="title">file</span>可以是一个文件地址字符串、文件类对象或地址类对象。<span class="title">compression</span>指明压缩格式</span></span><br></pre></td></tr></table></figure>





<h1 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h1><h2 id="处理路径问题"><a href="#处理路径问题" class="headerlink" title="处理路径问题"></a>处理路径问题</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">path=<span class="string">&#x27;C:\\User\\yan\\paper.txt&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(os.path.basename(path))</span><br><span class="line"><span class="built_in">print</span>(os.path.dirname(path))</span><br><span class="line"><span class="built_in">print</span>(os.path.splitext(path))</span><br></pre></td></tr></table></figure>

<p>Output:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">paper.txt</span><br><span class="line">C:\User\yan</span><br><span class="line">(<span class="string">&#x27;C:\\User\\yan\\paper&#x27;</span>, <span class="string">&#x27;.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="判断文件或文件夹是否存在"><a href="#判断文件或文件夹是否存在" class="headerlink" title="判断文件或文件夹是否存在"></a>判断文件或文件夹是否存在</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">os.path.exists(filename)<span class="comment"># 检查文件或目录是否存在</span></span><br><span class="line">os.path.isfile(filename)<span class="comment"># 判断路径是否为文件 </span></span><br><span class="line">os.path.isdir(dirname)<span class="comment"># 判断路径是否为目录 </span></span><br><span class="line">os.path.getsize(filename)<span class="comment"># 获取文件大小</span></span><br><span class="line">os.path.getmtime(filename) <span class="comment">#文件修改时间</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">time.ctime(os.path.getmtime(filename)) <span class="comment">#转换为易读的方式</span></span><br><span class="line">os.listdir(dirname) <span class="comment"># 列出dir所有的文件</span></span><br></pre></td></tr></table></figure>



<h1 id="查找文件名"><a href="#查找文件名" class="headerlink" title="查找文件名"></a>查找文件名</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"> </span><br><span class="line">py_files = glob.glob(<span class="string">&#x27;*.py&#x27;</span>) <span class="comment"># 以list输出当前路径下所有后缀名为py的文件</span></span><br><span class="line"><span class="built_in">print</span>(py_files) <span class="comment"># [&#x27;hehe.py&#x27;, &#x27;haha.py&#x27;]</span></span><br></pre></td></tr></table></figure>



<h1 id="复制和移动"><a href="#复制和移动" class="headerlink" title="复制和移动"></a>复制和移动</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.move(<span class="string">&#x27;/tmp/20170223/new&#x27;</span>,<span class="string">&#x27;/tmp/20170223/test&#x27;</span>)   <span class="comment"># 移动文件, 重命名等</span></span><br><span class="line">shutil.copyfile(oldfilename, newfilename) <span class="comment">#从源src复制到dst中去。当然前提是目标地址是具备可写权限。</span></span><br><span class="line">shutil.copy(oldfilename, newfilename)<span class="comment"># 复制一个文件到一个文件或一个目录.copy第二个参数既可以指定文件名，也可以指定文件夹名</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li><code>shutil.copyfile(src, dst)</code>函数用来复制单个文件的内容，并将其写入到另一个文件中。==仅复制源文件的内容数据==，不包括所有的元数据（如文件模式、访问时间和修改时间等）。目标文件存在，则覆盖目标文件。如果目标文件不存在，则新建目标文件。使用<code>shutil.copyfile</code>时，必须保证源文件和目标文件都是存在的。</li>
<li><code>shutil.copy(src, dst)</code>函数用来复制单个文件。该函数复制了源文件的内容数据和所有元数据，如权限、时间戳等。与<code>shutil.copyfile</code>不同的是，目标文件已经存在时不会覆盖旧文件，而是会报错。如果目标文件不存在，则新建目标文件。</li>
</ol>
</blockquote>
<h1 id="文件夹操作"><a href="#文件夹操作" class="headerlink" title="文件夹操作"></a>文件夹操作</h1><p>获取当前的工作文件夹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>

<p>改变当前工作文件夹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(dirname)</span><br></pre></td></tr></table></figure>

<p>新建文件夹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.mkdir(dirname)  <span class="comment">#创建单级目录</span></span><br><span class="line">os.makedirs(dirname/subdirname) <span class="comment">#创建多级目录</span></span><br></pre></td></tr></table></figure>

<p>删除文件夹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">os.rmdir(dirname) <span class="comment">#删除单级空目录</span></span><br><span class="line">os.removedirs(dirname/subdirname) <span class="comment">#删除多级空目录</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.rmtree(dirname) <span class="comment">#删除目录，不管是空还是非空，是单级目录还是多级目录</span></span><br></pre></td></tr></table></figure>

<p>复制文件夹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copytree(oldfoldername, newfoldername)</span><br></pre></td></tr></table></figure>

<p>移动文件夹/文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.move(oldpos, newp)</span><br></pre></td></tr></table></figure>



<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/497988788">https://zhuanlan.zhihu.com/p/497988788</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-files-io.html">https://www.runoob.com/python/python-files-io.html</a></p>

      </div>
    </div>
  </article>
  <div class="post__foot">
    
    <div class="post-nav">
  
    <a class="post-nav-item-left" href="/2023/05/13/7.29/%E7%86%8A%E6%B5%B7cms_v1.0/">
      <div class="text-align">
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596"/>
        </svg>
        <span class="text-small">上一篇</span>
      </div>
      <div>熊海cms_v1.0审计</div>
    </a>
  
  <div class="vhr"></div>
  
    <a class="post-nav-item-right" href="/2023/05/12/hexo%E6%8A%A5%E9%94%99/">
      <div class="text-align">
        <span class="text-small">下一篇</span>
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             transform="scale(-1,-1)"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596"/>
        </svg>
      </div>
      hexo报错收集
    </a>
  
</div>

    
    
  </div>

    </div>
    <div class="foot">
      <div class="foot-inner">
        <div class="foot__head">
          
            <div class="foot-line">
              <div class="matts">安</div><div class="matts">得</div><div class="matts">倚</div><div class="matts">天</div><div class="matts">剑</div>
            </div>
          
            <div class="foot-line">
              <div class="matts">跨</div><div class="matts">海</div><div class="matts">斩</div><div class="matts">长</div><div class="matts">鲸</div>
            </div>
          
        </div>
        <div class="foot__body">
          
            <div class="foot-item">
              <div class="foot-item__head">朋友</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link"
                         height="20px"
                         width="20px"
                         src="/images/icon/icon-link.svg"/>
                    <a class="foot-link" target="_blank" rel="noopener" href="https://blog.huamang.xyz/">huamang</a>
                  </div>
                
                  <div class="text">
                    <img alt="link"
                         height="20px"
                         width="20px"
                         src="/images/icon/icon-link.svg"/>
                    <a class="foot-link" target="_blank" rel="noopener" href="https://www.cnblogs.com/Aurora-M/">Aurora</a>
                  </div>
                
                <div class="text">
                  <img alt="link"
                       height="20px"
                       width="20px"
                       src="/images/icon/icon-link+.svg"/>
                  <a class="foot-link"
                     href="mailto:735587142@qq.com?subject=%E7%94%B3%E8%AF%B7%20Hozen.site%20%E7%9A%84%E5%8F%8B%E9%93%BE%E4%BD%8D%E7%BD%AE">
                  申请友链</a>
                </div>
              </div>
            </div>
          
          
            <div class="foot-item">
              <div class="foot-item__head">账号</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-github.svg"/>
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/MUNG29">github</a>
                  </div>
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/QQ.png"/>
                    <a class="foot-link" href="">735587142</a>
                  </div>
                
              </div>
            </div>
          
          <div class="foot-item">
            <div class="foot-item__head">联系</div>
            <div class="foot-item__body">
              <div class="text">
                <img alt="link"
                     height="20px"
                     width="20px"
                     src="/images/icon/icon-email.svg"/>
                <a class="foot-link" href="mailto:735587142@qq.com">735587142@qq.com</a>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright">
          <a href="https://MUNG29.github.io">东隅's blog</a> &nbsp;|&nbsp;由&nbsp;<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>&nbsp;及&nbsp;
          <svg width="20" height="20" viewBox="0 0 725 725">
            <path fill-rule="evenodd" fill="rgb(221, 221, 221)"
            d="M145.870,236.632 L396.955,103.578 L431.292,419.44 L156.600,522.53 L145.870,236.632 Z" />
            <path fill-rule="evenodd" fill="rgb(159, 159, 159)"
            d="M396.955,103.578 L564.345,234.486 L611.558,513.469 L431.292,419.44 L396.955,103.578 Z" />
            <path fill-rule="evenodd" fill="rgb(0, 0, 0)"
            d="M431.292,419.44 L611.558,513.469 L358.327,595.18 L156.600,522.53 L431.292,419.44 Z" />
          </svg>
          <a target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">致远</a>&nbsp;驱动
        </div>
      </div>
    </div>
    
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    
  
  
    <script type="text/javascript" src=/js/toc.js></script>
  

  </body>
</html>
